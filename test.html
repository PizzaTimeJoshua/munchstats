<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EV Distribution Chart</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Simple styling for the buttons */
    .stat-button {
      margin: 5px;
      padding: 8px 16px;
      font-size: 14px;
    }
    /* Container for the chart so we can control height */
    #chart-container {
      width: 100%;
      height: 300px;
      position: relative;
    }
  </style>
</head>
<body>
  <!-- Buttons to switch between stats -->
  <div>
    <button class="stat-button" onclick="updateChart(0)">HP</button>
    <button class="stat-button" onclick="updateChart(1)">Attack</button>
    <button class="stat-button" onclick="updateChart(2)">Defense</button>
    <button class="stat-button" onclick="updateChart(3)">Sp. Attack</button>
    <button class="stat-button" onclick="updateChart(4)">Sp. Defense</button>
    <button class="stat-button" onclick="updateChart(5)">Speed</button>
  </div>

  <!-- Chart container with fixed height -->
  <div id="chart-container">
    <canvas id="evChart"></canvas>
  </div>

  <script>
    // Example EV data: Each stat's dataset is an array of [EV value, percentage] pairs.
    const EVs = [
      [ // HP
        [0, 0.05],
        [50, 0.15],
        [100, 0.30],
        [150, 0.25],
        [200, 0.15],
        [252, 0.10]
      ],
      [ // Attack
        [0, 0.10],
        [50, 0.20],
        [100, 0.25],
        [150, 0.20],
        [200, 0.15],
        [252, 0.10]
      ],
      [ // Defense
        [0, 0.08],
        [50, 0.18],
        [100, 0.28],
        [150, 0.22],
        [200, 0.12],
        [252, 0.10]
      ],
      [ // Sp. Attack
        [0, 0.07],
        [50, 0.17],
        [100, 0.27],
        [150, 0.21],
        [200, 0.13],
        [252, 0.15]
      ],
      [ // Sp. Defense
        [0, 0.06],
        [50, 0.16],
        [100, 0.26],
        [150, 0.24],
        [200, 0.14],
        [252, 0.12]
      ],
      [ // Speed
        [0, 0.05],
        [50, 0.15],
        [100, 0.30],
        [150, 0.25],
        [200, 0.15],
        [252, 0.10]
      ]
    ];

    // Corresponding labels for the EV types
    const statLabels = ["HP", "Attack", "Defense", "Sp. Attack", "Sp. Defense", "Speed"];

    // Get initial data from the first stat (HP)
    const initialData = EVs[0];
    const labels = initialData.map(pair => pair[0]);
    const dataPoints = initialData.map(pair => pair[1]);

    // Create the Chart.js bar chart
    const ctx = document.getElementById('evChart').getContext('2d');
    const evChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: statLabels[0],
          data: dataPoints,
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false, // allows us to control height via the container
        scales: {
          y: {
            beginAtZero: true,
            max: 1,
            ticks: {
              callback: function(value) {
                return (value * 100) + '%';
              }
            }
          },
          x: {
            title: {
              display: true,
              text: 'EV Value'
            }
          }
        }
      }
    });

    // Function to update the chart when a button is clicked.
    function updateChart(index) {
      const newData = EVs[index];
      evChart.data.labels = newData.map(pair => pair[0]);
      evChart.data.datasets[0].data = newData.map(pair => pair[1]);
      evChart.data.datasets[0].label = statLabels[index];
      evChart.update();
    }
  </script>
</body>
</html>
